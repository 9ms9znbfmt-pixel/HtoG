<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Selected — 1/25</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body class="page-selected-card">
  <main class="page">
    <section class="frame" aria-label="Selected">
      <div class="frame-inner">

        <header class="top">
          <div class="top-brand">
            <a href="index.html">HtoG</a>
          </div>

          <nav class="top-links" aria-label="Primary">
            <a href="projects.html">Projects</a>
            <a href="notes.html">Notes</a>
            <a href="about.html">About</a>
          </nav>
        </header>

        <div class="rule"></div>

        <section class="selected">
          <!-- LEFT: image -->
          <div class="selected-media">
            <a class="zoom" href="media/selected/2.JPG" target="data-full" rel="noopener">
              <img src="media/selected/2.JPG" alt="Selected photograph — Real Street" loading="eager">
            </a>
          </div>

          <!-- RIGHT: text -->
          <aside class="selected-meta">
            <h1 class="work-title">Real Street</h1>
            <p class="work-note">
              Chance, arranged by the city.<br>
            </p>

            <dl class="work-spec">
              <div>
                <dt>Camera</dt>
                <dd>Leica M10</dd>
              </div>
              <div>
                <dt>Lens</dt>
                <dd>Voigtlander Nokton II 35mm f1.4 s.c</dd>
              </div>
              <div>
                <dt>Shutter</dt>
                <dd>1/250s</dd>
              </div>
            </dl>

            <p class="hint">
              Click the image to open full size.
            </p>
          </aside>
        </section>

        <div class="rule"></div>

        <!-- Prev / Next -->
        <nav class="pager" aria-label="Selected navigation">
          <a class="pager-link" href="selected01.html">← Previous</a>
          <a class="pager-link" href="selected03.html">Next →</a>
        </nav>

        <footer class="bottom">
          <div class="bottom-copy">© 2026. HtoG. All rights reserved.</div>
        </footer>

      </div>
    </section>
<!-- Lightbox (no frame, no X) -->
<div class="lb" id="lb" aria-hidden="true">
  <img class="lb-img" id="lbImg" alt="">
</div>
  </main>

<script>
  (function(){
    const lb = document.getElementById('lb');
    const lbImg = document.getElementById('lbImg');
    if(!lb || !lbImg) return;

    let scale = 1;
    let tx = 0, ty = 0;
    let dragging = false;
    let startX = 0, startY = 0;

    function apply(){
      lbImg.style.transform = `translate(calc(-50% + ${tx}px), calc(-50% + ${ty}px)) scale(${scale})`;
    }

    function openLB(src, alt){
      lb.classList.add('is-open');
      lb.setAttribute('aria-hidden','false');

      // 초기 상태: 중앙 + 기본 스케일
      scale = 1; tx = 0; ty = 0;
      lbImg.style.maxWidth = '92vw';
      lbImg.style.maxHeight = '86vh';
      lbImg.src = src;
      lbImg.alt = alt || '';
      apply();

      document.documentElement.style.overflow = 'hidden';
    }

    function closeLB(){
      lb.classList.remove('is-open');
      lb.setAttribute('aria-hidden','true');
      lbImg.removeAttribute('src');
      document.documentElement.style.overflow = '';
    }

    // 썸네일/이미지 클릭 → 라이트박스 열기 (새 창 막기)
    document.addEventListener('click', (e) => {
      const a = e.target.closest('a.zoom, a.thumb');
      if(!a) return;

      const img = a.querySelector('img');
      const href = a.getAttribute('href');

      // 이미지 링크만 라이트박스로
      if(href && (href.endsWith('.jpg') || href.endsWith('.JPG') || href.endsWith('.png') || href.endsWith('.webp'))){
        e.preventDefault();
        openLB(href, img ? img.alt : '');
      }
    });

    // 배경 클릭하면 닫기 (이미지 클릭은 닫지 않음)
    lb.addEventListener('click', (e) => {
      if(e.target === lb) closeLB();
    });

    // ESC로 닫기
    window.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && lb.classList.contains('is-open')) closeLB();
    });

    // 드래그로 이동
    lbImg.addEventListener('mousedown', (e) => {
      dragging = true;
      startX = e.clientX - tx;
      startY = e.clientY - ty;
      e.preventDefault();
    });
    window.addEventListener('mousemove', (e) => {
      if(!dragging) return;
      tx = e.clientX - startX;
      ty = e.clientY - startY;
      apply();
    });
    window.addEventListener('mouseup', () => dragging = false);

    // 휠로 확대/축소 (커서 기준까지는 아니고, 중앙 기준으로 자연스럽게)
    lb.addEventListener('wheel', (e) => {
      if(!lb.classList.contains('is-open')) return;
      e.preventDefault();
      const delta = Math.sign(e.deltaY);
      const next = scale * (delta > 0 ? 0.9 : 1.1);
      scale = Math.min(8, Math.max(0.5, next));
      apply();
    }, { passive: false });

    // 모바일: 핀치 줌 (간단 버전)
    let pinchStartDist = null;
    lb.addEventListener('touchstart', (e) => {
      if(e.touches.length === 2){
        const dx = e.touches[0].clientX - e.touches[1].clientX;
        const dy = e.touches[0].clientY - e.touches[1].clientY;
        pinchStartDist = Math.hypot(dx, dy);
      } else if(e.touches.length === 1){
        dragging = true;
        startX = e.touches[0].clientX - tx;
        startY = e.touches[0].clientY - ty;
      }
    }, { passive: true });

    lb.addEventListener('touchmove', (e) => {
      if(!lb.classList.contains('is-open')) return;

      if(e.touches.length === 2 && pinchStartDist){
        const dx = e.touches[0].clientX - e.touches[1].clientX;
        const dy = e.touches[0].clientY - e.touches[1].clientY;
        const dist = Math.hypot(dx, dy);
        const ratio = dist / pinchStartDist;
        const next = scale * ratio;
        scale = Math.min(8, Math.max(0.5, next));
        pinchStartDist = dist;
        apply();
      } else if(e.touches.length === 1 && dragging){
        tx = e.touches[0].clientX - startX;
        ty = e.touches[0].clientY - startY;
        apply();
      }
    }, { passive: true });

    lb.addEventListener('touchend', () => {
      dragging = false;
      pinchStartDist = null;
    });

  })();
</script>
</body>
</html>