<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Solitude- 001</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body class="page-selected-card">
  <main class="page">
    <section class="frame" aria-label="Selected">
      <div class="frame-inner">

        <header class="top">
          <div class="top-brand">
            <a href="index.html">HtoG</a>
          </div>

          <nav class="top-links" aria-label="Primary">
            <a href="projects.html">Projects</a>
            <a href="notes.html">Notes</a>
            <a href="about.html">About</a>
          </nav>
        </header>

        <div class="rule"></div>

        <section class="selected is-landscape">
          <div class="selected-media">
            <a class="zoom" href="media/selected/9.JPG" target="data-full" rel="noopener">
              <img src="media/selected/9.JPG" alt="Solitude" loading="eager">
            </a>
          </div>

          <aside class="selected-meta">
            <h1 class="work-title">02</h1>
            <p class="work-note">
              The city does not see me
            </p>
            <dl class="work-spec">
              <div>
                <dt>Camera</dt>
                <dd>Leica M10</dd>
              </div>
              <div>
                <dt>Lens</dt>
                <dd>Jupiter-8 50mm</dd>
              </div>
              <div>
                <dt>Shutter</dt>
                <dd>1/12s</dd>
              </div>
            </dl>

            <p class="hint">
              Click the image to open full size.
            </p>
          </aside>
        </section>

        <div class="rule"></div>

        <!-- Prev / Next -->
        <nav class="pager" aria-label="Selected navigation">
          <a class="pager-link" href="solitude01.html">← Previous</a>
          <a class="pager-link" href="solitude03.html">Next →</a>
        </nav>

        <footer class="bottom">
          <div class="bottom-copy">© 2026. HtoG. All rights reserved.</div>
        </footer>

      </div>
    </section>
<div class="lightbox" id="lightbox" aria-hidden="true">
  <button class="lightbox-close" type="button" aria-label="Close">×</button>

  <div class="lightbox-stage" id="lightboxStage">
    <img class="lightbox-img" id="lightboxImg" alt="">
  </div>

  <div class="lightbox-help">
    Scroll / Pinch to zoom · Drag to pan · Double tap to reset
  </div>
</div>
  </main>

<script>
  // footer year (optional)
  const y = document.getElementById("y");
  if (y) y.textContent = new Date().getFullYear();

  // Lightbox
  const lb = document.getElementById("lightbox");
  const lbImg = document.getElementById("lightboxImg");
  const lbStage = document.getElementById("lightboxStage");
  const lbClose = lb.querySelector(".lightbox-close");

  let scale = 1;
  let tx = 0, ty = 0;
  let isPanning = false;
  let startX = 0, startY = 0;

  function applyTransform(){
    lbImg.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;
  }

  function resetView(){
    scale = 1;
    tx = 0; ty = 0;
    applyTransform();
  }

  function openLightbox(src, alt){
    lbImg.src = src;
    lbImg.alt = alt || "";
    resetView();
    lb.classList.add("is-open");
    lb.setAttribute("aria-hidden", "false");
    document.body.style.overflow = "hidden";
  }

  function closeLightbox(){
    lb.classList.remove("is-open");
    lb.setAttribute("aria-hidden", "true");
    document.body.style.overflow = "";
    lbImg.src = "";
  }

  // open on click
  document.querySelectorAll("a.zoom").forEach(a => {
    a.addEventListener("click", (e) => {
      e.preventDefault();
      const full = a.dataset.full || a.getAttribute("href");
      const img = a.querySelector("img");
      openLightbox(full, img ? img.alt : "");
    });
  });

  // close events
  lbClose.addEventListener("click", closeLightbox);
  lb.addEventListener("click", (e) => {
    if (e.target === lb) closeLightbox(); // backdrop click
  });
  window.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && lb.classList.contains("is-open")) closeLightbox();
  });

  // wheel zoom (desktop)
  lbStage.addEventListener("wheel", (e) => {
    e.preventDefault();
    const delta = -e.deltaY;
    const factor = delta > 0 ? 1.08 : 0.92;
    scale = Math.min(6, Math.max(1, scale * factor));
    applyTransform();
  }, { passive: false });

  // drag to pan (mouse)
  lbStage.addEventListener("mousedown", (e) => {
    isPanning = true;
    startX = e.clientX - tx;
    startY = e.clientY - ty;
  });
  window.addEventListener("mousemove", (e) => {
    if (!isPanning) return;
    tx = e.clientX - startX;
    ty = e.clientY - startY;
    applyTransform();
  });
  window.addEventListener("mouseup", () => { isPanning = false; });

  // touch: pan + pinch zoom
  let lastDist = null;
  let lastTouchCenter = null;

  function dist(t1, t2){
    const dx = t2.clientX - t1.clientX;
    const dy = t2.clientY - t1.clientY;
    return Math.hypot(dx, dy);
  }
  function center(t1, t2){
    return { x: (t1.clientX + t2.clientX)/2, y: (t1.clientY + t2.clientY)/2 };
  }

  lbStage.addEventListener("touchstart", (e) => {
    if (e.touches.length === 1){
      isPanning = true;
      startX = e.touches[0].clientX - tx;
      startY = e.touches[0].clientY - ty;
    } else if (e.touches.length === 2){
      isPanning = false;
      lastDist = dist(e.touches[0], e.touches[1]);
      lastTouchCenter = center(e.touches[0], e.touches[1]);
    }
  }, { passive: false });

  lbStage.addEventListener("touchmove", (e) => {
    e.preventDefault();

    if (e.touches.length === 1 && isPanning){
      tx = e.touches[0].clientX - startX;
      ty = e.touches[0].clientY - startY;
      applyTransform();
    } else if (e.touches.length === 2){
      const d = dist(e.touches[0], e.touches[1]);
      const c = center(e.touches[0], e.touches[1]);

      if (lastDist){
        const factor = d / lastDist;
        scale = Math.min(6, Math.max(1, scale * factor));
      }

      // move with pinch center
      if (lastTouchCenter){
        tx += (c.x - lastTouchCenter.x);
        ty += (c.y - lastTouchCenter.y);
      }

      lastDist = d;
      lastTouchCenter = c;
      applyTransform();
    }
  }, { passive: false });

  lbStage.addEventListener("touchend", () => {
    isPanning = false;
    lastDist = null;
    lastTouchCenter = null;
  });

  // double tap / double click to reset
  let lastTap = 0;
  lbStage.addEventListener("click", (e) => {
    const now = Date.now();
    if (now - lastTap < 300) resetView();
    lastTap = now;
  });
</script>
  
  
</body>
</html>